import*as r from"react";import e,{PrimeReactContext as t}from"primereact/api";import{useStyle as n,useMountEffect as o,useUpdateEffect as i,useUnmountEffect as c}from"primereact/hooks";import{ObjectUtils as u,mergeProps as p,classNames as a,DomHandler as l}from"primereact/utils";import{ComponentBase as s}from"primereact/componentbase";function f(){return f=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},f.apply(this,arguments)}function m(r){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},m(r)}function y(r,e){if("object"!==m(r)||null===r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,e||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}function b(r){var e=y(r,"string");return"symbol"===m(e)?e:String(e)}var d=s.extend({defaultProps:{__TYPE:"Ripple",children:void 0},css:{styles:"\n@layer primereact {\n    .p-ripple {\n        overflow: hidden;\n        position: relative;\n    }\n    \n    .p-ink {\n        display: block;\n        position: absolute;\n        background: rgba(255, 255, 255, 0.5);\n        border-radius: 100%;\n        transform: scale(0);\n    }\n    \n    .p-ink-active {\n        animation: ripple 0.4s linear;\n    }\n    \n    .p-ripple-disabled .p-ink {\n        display: none !important;\n    }\n}\n\n@keyframes ripple {\n    100% {\n        opacity: 0;\n        transform: scale(2.5);\n    }\n}\n\n",classes:{root:"p-ink"}},getProps:function(r){return u.getMergedProps(r,d.defaultProps)},getOtherProps:function(r){return u.getDiffProps(r,d.defaultProps)}});function g(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function v(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?g(Object(t),!0).forEach((function(e){var n,o,i;n=r,i=t[e],(o=b(o=e))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}var O=r.memo(r.forwardRef((function(u,s){var m=r.useRef(null),y=r.useRef(null),b=r.useContext(t),g=d.getProps(u,b),O={props:g};n(d.css.styles,{name:"ripple"});var h=d.setMetaData(v({},O)),P=h.ptm,j=h.cx,w=function(){return m.current&&m.current.parentElement},k=function(){y.current&&y.current.addEventListener("pointerdown",S)},S=function(r){var e=l.getOffset(y.current),t=r.pageX-e.left+document.body.scrollTop-l.getWidth(m.current)/2,n=r.pageY-e.top+document.body.scrollLeft-l.getHeight(m.current)/2;x(t,n)},x=function(r,e){m.current&&"none"!==getComputedStyle(m.current,null).display&&(l.removeClass(m.current,"p-ink-active"),E(),m.current.style.top=e+"px",m.current.style.left=r+"px",l.addClass(m.current,"p-ink-active"))},E=function(){if(m.current&&!l.getHeight(m.current)&&!l.getWidth(m.current)){var r=Math.max(l.getOuterWidth(y.current),l.getOuterHeight(y.current));m.current.style.height=r+"px",m.current.style.width=r+"px"}};r.useImperativeHandle(s,(function(){return{props:g,getInk:function(){return m.current},getTarget:function(){return y.current}}})),o((function(){m.current&&(y.current=w(),E(),k())})),i((function(){m.current&&!y.current&&(y.current=w(),E(),k())})),c((function(){m.current&&(y.current=null,y.current&&y.current.removeEventListener("pointerdown",S))}));var D=p({className:a(j("root"))},P("root"));return b&&b.ripple||e.ripple?r.createElement("span",f({role:"presentation",ref:m},D,{onAnimationEnd:function(r){l.removeClass(r.currentTarget,"p-ink-active")}})):null})));O.displayName="Ripple";export{O as Ripple};
